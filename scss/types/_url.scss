@charset 'UTF-8';

////
/// Flavor SCSS Types URL Module
/// @group types-url
/// @author blackmirror1980
////

/// Checks if a string is an url function string
///
/// @access public
/// @param {any} $u - the value to check
/// @return {boolean}
/// @requires {function} is-string
/// @requires {function} string-starts-with
/// @requires {function} string-ends-with
@function has-url-function($u) {
  @if is-string($u) {
    $url: $u;

    $url-function-starts-with: string-starts-with($url, 'url("') or string-starts-with($url, 'url(\'');
    $url-function-ends-with: string-ends-with($url, '")') or string-ends-with($url, '\')');

    @return $url-function-starts-with and $url-function-ends-with;
  }

  @warn '`url: #{$u}` is not a valid string';
  @return false;
}

/// Checks if a string is an url
///
/// @access public
/// @param {any} $u - the value to check
/// @return {boolean}
/// @requires {function} is-string
/// @requires {function} has-url-function
/// @requires {function} string-slice
/// @requires {function} string-length
/// @requires {function} string-starts-with
@function is-url($u) {
  @if is-string($u) {
    $url: $u;

    @if has-url-function($url) {
      $url: string-slice($u, 6, string-length($u) - 2);
    }

    @if string-starts-with($url, '../') or string-starts-with($url, '/') or string-starts-with($url, 'http') {
      @return true;
    }
  }

  @warn '`url: #{$u}` is not a valid string';
  @return false;
}

/// Adds the url function to an url string if is missing
///
/// @access public
/// @param {any} $u - the value to check
/// @return {boolean}
@function inspect-url($u) {
  @if is-url($u) {
    $url: $u;

    @if not has-url-function($url) {
      $url: url('#{$url}');
    }

    @return $url;
  }

  @return false;
}
